<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>特效字符串 | 星际酒馆二创手册</title><meta name="description" content="星际酒馆二创手册">
    <link rel="modulepreload" href="/SCTavern-Editor-Manual/assets/app.c004be2d.js"><link rel="modulepreload" href="/SCTavern-Editor-Manual/assets/effectString.html.870dfafa.js"><link rel="modulepreload" href="/SCTavern-Editor-Manual/assets/effectString.html.c1a12d42.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.5bdfe819.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.5e4e8475.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.52e22461.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.3c96e8c3.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.ac25835b.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.4e112d5f.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.013647cc.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.4d999574.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.591b3d9d.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.d9c94f5a.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.b466388a.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.ffac7a49.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.a3501018.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.a9cdc6b1.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.83e831f6.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/index.html.2b003c72.js"><link rel="prefetch" href="/SCTavern-Editor-Manual/assets/404.html.0b45e971.js">
    <link rel="stylesheet" href="/SCTavern-Editor-Manual/assets/style.cbabc07a.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/SCTavern-Editor-Manual/" class=""><!----><span class="site-name">星际酒馆二创手册</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/SCTavern-Editor-Manual/" class="sidebar-item sidebar-heading" aria-label="开始"><!--[--><!--]--> 开始 <!--[--><!--]--></a><!----></li><li><a href="/SCTavern-Editor-Manual/card/" class="router-link-active sidebar-item sidebar-heading" aria-label="卡牌"><!--[--><!--]--> 卡牌 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="特效字符串"><!--[--><!--]--> 特效字符串 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html#标准参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="标准参数"><!--[--><!--]--> 标准参数 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html#发动时间" class="router-link-active router-link-exact-active sidebar-item" aria-label="发动时间"><!--[--><!--]--> 发动时间 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html#发动条件" class="router-link-active router-link-exact-active sidebar-item" aria-label="发动条件"><!--[--><!--]--> 发动条件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html#作用位置" class="router-link-active router-link-exact-active sidebar-item" aria-label="作用位置"><!--[--><!--]--> 作用位置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html#奖励效果" class="router-link-active router-link-exact-active sidebar-item" aria-label="奖励效果"><!--[--><!--]--> 奖励效果 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html#各种子特效字符串" class="router-link-active router-link-exact-active sidebar-item" aria-label="各种子特效字符串"><!--[--><!--]--> 各种子特效字符串 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html#任务" class="router-link-active router-link-exact-active sidebar-item" aria-label="任务"><!--[--><!--]--> 任务 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html#光环" class="router-link-active router-link-exact-active sidebar-item" aria-label="光环"><!--[--><!--]--> 光环 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html#直接执行" class="router-link-active router-link-exact-active sidebar-item" aria-label="直接执行"><!--[--><!--]--> 直接执行 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html#字符串" class="router-link-active router-link-exact-active sidebar-item" aria-label="字符串？"><!--[--><!--]--> 字符串？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html#自动生成描述" class="router-link-active router-link-exact-active sidebar-item" aria-label="自动生成描述"><!--[--><!--]--> 自动生成描述 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/SCTavern-Editor-Manual/unit/" class="sidebar-item sidebar-heading" aria-label="单位"><!--[--><!--]--> 单位 <!--[--><!--]--></a><!----></li><li><a href="/SCTavern-Editor-Manual/upgrade/" class="sidebar-item sidebar-heading" aria-label="卡牌升级"><!--[--><!--]--> 卡牌升级 <!--[--><!--]--></a><!----></li><li><a href="/SCTavern-Editor-Manual/hero/" class="sidebar-item sidebar-heading" aria-label="角色"><!--[--><!--]--> 角色 <!--[--><!--]--></a><!----></li><li><a href="/SCTavern-Editor-Manual/exp/" class="sidebar-item sidebar-heading" aria-label="拓展包"><!--[--><!--]--> 拓展包 <!--[--><!--]--></a><!----></li><li><a href="/SCTavern-Editor-Manual/ui/" class="sidebar-item sidebar-heading" aria-label="UI"><!--[--><!--]--> UI <!--[--><!--]--></a><!----></li><li><a href="/SCTavern-Editor-Manual/testParams/" class="sidebar-item sidebar-heading" aria-label="测试参数"><!--[--><!--]--> 测试参数 <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="特效字符串" tabindex="-1"><a class="header-anchor" href="#特效字符串" aria-hidden="true">#</a> 特效字符串</h1><p>“特效字符串”由“子特效字符串”组合拼接而成。每个“子特效字符串”都能独立的实现自己的功能。</p><h2 id="标准参数" tabindex="-1"><a class="header-anchor" href="#标准参数" aria-hidden="true">#</a> 标准参数</h2><p>一个标准的“子特效字符串”（如<code>子特效字符串(集结)</code>）具有4个参数：</p><ul><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html#%E5%8F%91%E5%8A%A8%E6%97%B6%E9%97%B4" class="router-link-active router-link-exact-active">发动时间</a></li><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html#%E5%8F%91%E5%8A%A8%E6%9D%A1%E4%BB%B6" class="router-link-active router-link-exact-active">发动条件</a></li><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html#%E4%BD%9C%E7%94%A8%E4%BD%8D%E7%BD%AE" class="router-link-active router-link-exact-active">作用位置</a></li><li><a aria-current="page" href="/SCTavern-Editor-Manual/card/effectString.html#%E5%A5%96%E5%8A%B1%E6%95%88%E6%9E%9C" class="router-link-active router-link-exact-active">奖励效果</a></li></ul><h3 id="发动时间" tabindex="-1"><a class="header-anchor" href="#发动时间" aria-hidden="true">#</a> 发动时间</h3><p>指何时触发该子特效字符串。</p><h4 id="所有发动时间" tabindex="-1"><a class="header-anchor" href="#所有发动时间" aria-hidden="true">#</a> 所有发动时间</h4><ul><li>自身注卵时：此卡牌注卵单位到任意卡牌时触发。如何才算“注卵”单位，请参考<a href="/SCTavern-Editor-Manual/card/effectString.md/#%E5%A5%96%E5%8A%B1%E6%95%88%E6%9E%9C" class="">奖励效果</a>中的“奖励效果(单位)”。</li><li>自身升级完成时：此卡牌获得升级的时候触发。</li><li>自身任务重置时。</li><li>自身任务完成时(处于任意任务完成之后)：括号中文字的意思是任意任务完成时，先触发“发动条件为‘任意任务完成时’”的子特效字符串，再触发“发动条件为此条件”的子特效字符串。</li><li>自身任务完成时：与4相反，先触发“发动条件为此条件”的子特效字符串，再触发“发动条件为‘任意任务完成时’”的子特效字符串。</li><li>自身快速生产时。</li><li><s>自身空投时：已废弃。</s></li><li><s>自身进入战场时：已废弃。</s></li><li>自身进场时：只算进场，三连不会触发该特效。</li><li>自身进场和出售时。</li><li><s>自身交换时：已废弃。</s></li><li>自身集结时：此卡牌的“子特效字符串(集结)”发动的时候触发，每轮集结仅生效一次（比如集结(2)，你有4能量也只触发一次，你有卡牌「阿塔尼斯」也只触发一次。）</li><li>自身获得黑暗值时：无论一次性获得多少黑暗值，只触发一次。</li><li>自身更换挂件时。</li><li>自身出售时。</li><li><s>自身被征募时：已废弃。</s></li><li>自身被移动时：移动指通过各种方式使得此卡牌位置发生改变。</li><li>自身被夺取时。</li><li>折跃到自身时：指任意单位折跃到此卡牌时触发。如何才算“折跃”单位，请参考<a href="/SCTavern-Editor-Manual/card/effectString.md/#%E5%A5%96%E5%8A%B1%E6%95%88%E6%9E%9C" class="">奖励效果</a>中的“奖励效果(单位)”。</li><li>提升酒馆等级时。</li><li>刷新完成时：指刷新酒馆，在完成刷新后触发。</li><li>刷新时：也是刷新酒馆，与“刷新完成时”相比，触发时间更早。晚于扣除刷新费用，早于商店陈列的卡牌进行更新。</li><li>任意注卵时：任意卡牌注卵单位到任意卡牌时触发。如何才算“注卵”单位，请参考<a href="/SCTavern-Editor-Manual/card/effectString.md/#%E5%A5%96%E5%8A%B1%E6%95%88%E6%9E%9C" class="">奖励效果</a>中的“奖励效果(单位)”。</li><li>任意折跃时：任意卡牌折跃单位到任意卡牌时触发。如何才算“折跃”单位，请参考<a href="/SCTavern-Editor-Manual/card/effectString.md/#%E5%A5%96%E5%8A%B1%E6%95%88%E6%9E%9C" class="">奖励效果</a>中的“奖励效果(单位)”。</li><li>任意我方卡牌进入战场时：不保证可行。</li><li>任意三连时。</li><li>任意任务重置时。</li><li>任意任务完成时。</li><li><s>任意其他种族卡牌获得虚空投影时(废弃)：因为某个bug而废弃。</s></li><li>任意快速生产时。</li><li>任意空投时：已废弃。</li><li><s>任意卡牌获得虚空投影时(废弃)：因为某个bug而废弃。</s></li><li><s>任意进化时：已废弃。</s></li><li>任意进场时：指任意卡牌进场时，三连不会触发。</li><li><s>任意交换时：已废弃。</s></li><li>任意集结时：任意卡牌的“子特效字符串(集结)”发动的时候触发，每轮集结仅生效一次（比如集结(2)，你有4能量也只触发一次，你有卡牌「阿塔尼斯」也只触发一次；但如果是多张卡牌各自触发集结，则算多次）。</li><li>任意获得黑暗值时：一张卡牌无论一次性获得多少黑暗值，只触发一次；但如果是多张卡牌各自获得黑暗值，则算多次。</li><li>任意更换挂件时。</li><li>任意孵化时：任意卡牌孵化单位到任意卡牌时触发。如何才算“孵化”单位，请参考<a href="/SCTavern-Editor-Manual/card/effectString.md/#%E5%A5%96%E5%8A%B1%E6%95%88%E6%9E%9C" class="">奖励效果</a>中的“奖励效果(单位)”。</li><li>任意敌方卡牌进入战场时：不保证可行。</li><li>任意出售时。</li><li>任意变异时：任意卡牌单位发生“变异”时触发。如何才算单位发生“变异”，请参考<a href="/SCTavern-Editor-Manual/card/effectString.md/#%E5%A5%96%E5%8A%B1%E6%95%88%E6%9E%9C" class="">奖励效果</a>中的“奖励效果(变更单位)”。</li><li>任意被夺取时。</li><li>每回合开始时。</li><li>每回合结束时。</li><li>获得水晶塔时：无论一次性获得多少水晶塔，只触发一次。</li><li>辅助卡部署时。请参考诺娃的辅助卡设计。</li><li>孵化到自身时：指任意单位孵化到此卡牌时触发。如何才算“孵化”单位，请参考“所奖励效果”中的“奖励效果(单位)”。</li></ul><h4 id="自制发动时间" tabindex="-1"><a class="header-anchor" href="#自制发动时间" aria-hidden="true">#</a> 自制发动时间</h4><p>若你想做一个“任意卡牌被摧毁时”的发动时间，可以参考以下步骤：</p><ol><li>找到预设类型<code>发动时间</code>，在其中新增一个值，命名为“任意卡牌被摧毁时”。</li></ol><div class="custom-container tip"><p class="custom-container-title">位置</p><p>玩家卡牌特效&gt;特效字符串&gt;发动时间&gt;发动时间</p></div><ol start="2"><li>创建一个常量用于储存发动时间字符串。参考已有的常量<code>_发动时间 - 任意集结时</code>，创建一个常量<code>_发动时间 - 任意卡牌被摧毁时</code>值为<code>WhenAnyDestroyed</code>。</li></ol><div class="custom-container tip"><p class="custom-container-title">位置</p><p>玩家卡牌特效&gt;特效字符串&gt;发动时间</p></div><ol start="3"><li>修改函数<code>发动时间字符串</code>，如下图所示，在其中将前两步创建的东西进行绑定。</li></ol><p><img src="/SCTavern-Editor-Manual/assets/p17.6191b786.png" alt="p17"></p><div class="custom-container tip"><p class="custom-container-title">位置</p><p>玩家卡牌特效&gt;特效字符串&gt;发动时间&gt;发动时间字符串</p></div><ol start="4"><li>在文件夹“特效检验”中创建动作<code>任意卡牌被摧毁特效检验</code>，如下图所示直接复制动作<code>任意卡牌集结特效检验</code>然后改名即可。</li></ol><p><img src="/SCTavern-Editor-Manual/assets/p18.79b2d212.png" alt="p18"></p><p>你还需要把里面的<code>任意集结时</code>全部改为<code>任意卡牌被摧毁时</code>。</p><div class="custom-container tip"><p class="custom-container-title">位置</p><p>玩家卡牌特效&gt;特效检验</p></div><ol start="5"><li>在前四步完成之后，你已经实际上创建完成了。现在你需要在合适的时间去调用我们创建的动作<code>任意卡牌被摧毁特效检验</code>。显然，我们应该在任意一张卡牌被摧毁的时候调用。修改动作<code>失去卡牌时</code>，如下图所示，在最后调用动作<code>任意卡牌被摧毁特效检验</code>。</li></ol><p><img src="/SCTavern-Editor-Manual/assets/p19.7bbfa3de.png" alt="p19"></p><div class="custom-container tip"><p class="custom-container-title">位置</p><p>卡牌&gt;失去卡牌时</p></div><p>通过这5步，自制发动时间就完成了。这是“任意XXX”的制作步骤，而“自身XXX”步骤基本相同。</p><h3 id="发动条件" tabindex="-1"><a class="header-anchor" href="#发动条件" aria-hidden="true">#</a> 发动条件</h3><h4 id="所有发动条件" tabindex="-1"><a class="header-anchor" href="#所有发动条件" aria-hidden="true">#</a> 所有发动条件</h4><ul><li>发动条件(资源)</li><li>发动条件(制定任务完成条件)：参考<a href="/SCTavern-Editor-Manual/card/effectString.md/#%E4%BB%BB%E5%8A%A1" class="">任务</a>。</li><li>发动条件(拥有单位类型)：卡牌中具有改单位类型的单位时满足条件。</li><li>发动条件(与)：在条件A和条件B中填写“发动条件”，A和B需要同时满足，可以进行嵌套。</li><li>发动条件(需要某种族的卡牌)：参考卡牌「混合体巨兽」。</li><li>发动条件(无条件)。</li><li>发动条件(是具有该光环的第一张卡牌)：请参考<a href="/SCTavern-Editor-Manual/card/effectString.md/#%E5%85%89%E7%8E%AF" class="">光环</a>。</li><li>发动条件(是否具有三连效果)：用于限定此子特效字符串只在三连后其作用，参考卡牌「阿塔尼斯」。</li><li><s>发动条件(生物质兑换)：废弃</s></li><li>发动条件(任务完成)：需要卡牌处于任务完成状态。</li><li>发动条件(能量)：也就是判断卡牌的能量强度。</li><li>发动条件(零件)：判断卡牌的零件数量。</li><li>发动条件(科技挂件数量)</li></ul><div class="custom-container tip"><p class="custom-container-title">v3.7.8.7更新</p><p><code>发动条件(科技挂件数量)</code>被修改为<code>发动条件(挂件数量)</code>，可以判断“反应堆”，“高级科技挂件”的数量。</p></div><ul><li><s>发动条件(科技点数|满足自动扣除)：废弃</s></li><li>发动条件(卡牌种类计数)</li><li>发动条件(卡牌位置)：判断此卡牌的位置</li><li>发动条件(卡牌排布)：判断目前场上卡牌的位置情况</li><li>发动条件(卡牌计数)</li><li>发动条件(或)：在条件A和条件B中填写“发动条件”，A和B只需满足其一，可以进行嵌套。</li><li>发动条件(回合数)：参数<code>回合数</code>类型为字符串。填写数字时表示第几回合时满足条件。填写字符串<code>ThisRound</code>表示仅卡牌进场后的当前回合满足条件，<code>EvenRound</code>表示仅偶数回合满足条件，<code>OddRound</code>表示仅奇数回合满足条件。</li><li>发动条件(黑暗值)：卡牌总黑暗值满足要求即可。</li><li>发动条件(黑暗值-单次)：需要卡牌一次性获得的黑暗值满足要求。</li><li>发动条件(关联卡牌要求)：所谓“关联卡牌”，就是发起特效检验的卡牌。若子特效字符串的“发动时间”为“任意出售时”，那发起特效检验的卡牌就是那张“被出售的卡牌”。</li></ul><div class="custom-container tip"><p class="custom-container-title">例如</p><p>你想实现“任意虫族卡牌出售时”，那么你不但需要“发动时间”为“任意出售时”，还需要用“发动条件(关联卡牌要求)”，判断关联卡牌是不是虫族卡牌。</p></div><ul><li>发动条件(关联卡牌过滤)：另一种方式限制“关联卡牌”，如果你想同时限制，你需要使用“发动条件(与)”。它的第四个参数<code>价值要求(-1为任意/-2为高于/-3为低于)</code>是与此卡牌进行比较。</li><li>发动条件(挂件类型)</li><li>发动条件(概率)：一定概率满足条件。<code>0.5</code>表示50%概率。</li><li>发动条件(非)：条件不满足的时候满足，满足的时候不满足，可以进行嵌套。</li><li>发动条件(单位数量)</li></ul><h4 id="自制发动条件" tabindex="-1"><a class="header-anchor" href="#自制发动条件" aria-hidden="true">#</a> 自制发动条件</h4><p>若你想做一个“卡牌内单位的种类的数量大于/小于/等于某个值”的发动条件，可以参考以下步骤：</p><ol><li>在文件夹“发动条件”中创建一个新的文件夹“条件(单位种类数量)”。</li></ol><div class="custom-container tip"><p class="custom-container-title">位置</p><p>玩家卡牌特效&gt;特效字符串&gt;发动条件</p></div><ol start="2"><li>参考函数<code>发动条件(单位数量)</code>。在文件夹“条件(单位种类数量)”中新建一个函数<code>发动条件(单位种类数量)</code>（返回类型为字符串）。为其增加两个参数<code>比较方式</code>（类型为预设中的大于/等于/少于）和<code>比较值</code>（类型为整数）和一个局部变量<code>String</code>（类型为字符串）。<code>String</code>以<code>TypeCount</code>（这是需要你自定义的）打头，然后将参数拼接到<code>String</code>中。最后返回<code>String</code>。最终代码如图：</li></ol><p><img src="/SCTavern-Editor-Manual/assets/p20.5615806e.png" alt="p20"></p><p>各个参数需要用<code>.</code>隔开。实际使用中，我们需判断一张卡牌的种类数量需要等于5时，该函数返回的值将为：<code>TypeCount.Equal.5</code>。该字符串将储存在子特效字符串中。</p><ol start="3"><li>参考函数<code>判断条件(单位数量)</code>。在文件夹“条件(单位种类数量)”中新建一个函数<code>判断条件(单位种类数量)</code>（返回类型为布尔）。你需要3个参数：<code>玩家</code>、<code>卡牌索引</code>、<code>条件字符串</code>。这里的<code>条件字符串</code>就是形如前面<code>TypeCount.Equal.5</code>的字符串。你需要使用函数<code>子特效字符串的关键词第n个内部</code>，将<code>条件字符串</code>进行拆分。例如将<code>Equal</code>和<code>5</code>拆出来存在局部变量中。因此，我们首先算出卡牌中的种类数量，然后返回比较结果即可。比较用到的函数为<code>根据比较运算符比较的结果</code>（其功能可以右键跳至该字符串一探究竟）。最终代码如图：</li></ol><p><img src="/SCTavern-Editor-Manual/assets/p21.177141fd.png" alt="p21"></p><p>上图省略了计算种类数量的步骤。</p><ol start="4"><li>找到函数<code>条件关键字是否满足条件</code>，在其最下面添加一个如图所示的条件分支。其作用为调用步骤3的函数<code>判断条件(单位种类数量)</code>进行判断。</li></ol><p><img src="data:image/png;base64,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" alt="p22"></p><div class="custom-container tip"><p class="custom-container-title">位置</p><p>玩家卡牌特效&gt;特效字符串&gt;发动条件&gt;条件关键字是否满足条件</p></div><p>通过这4步，自制发动条件就完成了。可以明显看出，“发动条件”本质上是一个字符串。我们是先生成字符串，然后需要时，对字符串进行判断。</p><h3 id="作用位置" tabindex="-1"><a class="header-anchor" href="#作用位置" aria-hidden="true">#</a> 作用位置</h3><p>作用位置有4个参数，作用是筛选出有效的卡牌供<a href="/SCTavern-Editor-Manual/card/effectString.md/#%E5%A5%96%E5%8A%B1%E6%95%88%E6%9E%9C" class="">奖励效果</a>使用。筛选出的卡牌可以是多张、1张或者无卡牌。子特效字符串运作时，作用位置筛选顺序为：<code>作用位置B</code>-&gt;<code>最低星级</code>-&gt;<code>最高星级</code>-&gt;<code>作用位置A</code>。<code>最低星级</code>和<code>最高星级</code>为<code>-1</code>时，表示不受限制。筛选的结果将会是位置组成的字符串，例如结果为<code>136</code>时，指的就是1号位、3号位、6号位的卡牌。这些筛选出的卡牌被称为“作用卡牌”。</p><div class="custom-container tip"><p class="custom-container-title">例如</p><p>我想筛选出最右侧的、不低于3星的人族卡牌，我需要这样填参数：</p><p><img src="data:image/png;base64,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" alt="p23"></p><p>这样会先找到所有人族卡牌，然后再剔除低于3星的卡牌，最后才选择所处位置最靠右的卡牌。</p></div><h4 id="新增作用位置b的筛选" tabindex="-1"><a class="header-anchor" href="#新增作用位置b的筛选" aria-hidden="true">#</a> 新增作用位置B的筛选</h4><p>若你想筛选出价值超过10000的卡牌，可以参考以下步骤：</p><ol><li>找到预设类型“作用位置B”，为其添加新的值<code>价值超过10000</code>.</li></ol><div class="custom-container tip"><p class="custom-container-title">位置</p><p>玩家卡牌特效&gt;特效字符串&gt;作用位置&gt;作用位置B</p></div><ol start="2"><li>找到函数<code>作用位置</code>中的<code>综合 - 根据作用位置B切换(动作)</code>，添加如下条件：</li></ol><p><img src="data:image/png;base64,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" alt="p24"></p><div class="custom-container tip"><p class="custom-container-title">位置</p><p>玩家卡牌特效&gt;特效字符串&gt;作用位置&gt;作用位置</p></div><ol start="3"><li>找到函数<code>寻找对应的卡牌2</code>，在第一个<code>If Then Else Multiple</code>语句块中添加如下代码：</li></ol><p><img src="/SCTavern-Editor-Manual/assets/p25.a034b8f3.png" alt="p25"></p><div class="custom-container tip"><p class="custom-container-title">位置</p><p>玩家卡牌特效&gt;特效字符串&gt;作用位置&gt;寻找对应的卡牌2</p></div><p>通过这3步，就能实现筛选价值超过10000的卡牌了。然后你可以用来筛出所有价值超过10000的卡牌：</p><p><img src="data:image/png;base64,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" alt="p26"></p><p>此时函数<code>作用位置</code>返回的值为<code>All.Over10000.-1.-1</code>。<code>作用位置A</code>与<code>作用位置B</code>的实现方式类似。</p><h3 id="奖励效果" tabindex="-1"><a class="header-anchor" href="#奖励效果" aria-hidden="true">#</a> 奖励效果</h3><p>奖励效果是子特效字符串最重要的部分。它决定了“子特效字符串”的最终功能。</p><h4 id="所有奖励效果" tabindex="-1"><a class="header-anchor" href="#所有奖励效果" aria-hidden="true">#</a> 所有奖励效果</h4><ul><li>奖励效果(资源)</li><li>奖励效果(转移单位)</li><li>奖励效果(重置任务进度)</li><li>奖励效果(重复)：用于将多个相同的奖励效果重复拼接。</li><li>奖励效果(运行触发器)：为了应对各种特殊的效果，你可以选择通过“奖励效果触发器”自制奖励效果。后面会说明“奖励效果触发器”如何使用。</li><li><s>奖励效果(移除首次记录器)：废弃</s></li><li><s>奖励效果(研究完成)：废弃</s></li><li>奖励效果(且)：你需要多个奖励效果时使用，可以嵌套。</li><li><s>奖励效果(空投交换)：废弃</s></li><li>奖励效果(升级)：为“作用卡牌”添加升级，参数值<code>升级索引</code>为<code>-1</code>时，获得随机升级。</li><li>奖励效果(发现卡牌)：为玩家发现卡牌某个星级的卡牌。参数值<code>卡牌星级</code>为<code>-1</code>时，发现星级等于玩家当前酒馆等级的卡牌。</li><li>奖励效果(酒馆等级和升级费用)</li><li>奖励效果(精英化)：将“作用卡牌”内的单位变为<a href="/SCTavern-Editor-Manual/unit/README.md/#%E7%B2%BE%E8%8B%B1%E5%8D%95%E4%BD%8D" class="">精英单位</a>。参数<code>精英类型的数量</code>值小于<code>0</code>时，精英化所有该类型的单位。参数<code>精英化类型(S)</code>兼容前缀为<code>(S)</code>的特殊单位类型，比如<code>(S)生物单位</code>。</li><li>奖励效果(获得黑暗值)</li><li>奖励效果(更新任务进度)：参考<a href="/SCTavern-Editor-Manual/card/effectString.md/#%E4%BB%BB%E5%8A%A1" class="">任务</a>。</li><li>奖励效果(复制单位)：将<code>被复制的卡牌位置</code>的单位复制到<code>作用位置</code>的卡牌中。参数<code>复制数量</code>为<code>-1</code>时，复制所有单位；为<code>-2</code>时，所有单位50%概率复制；为<code>-3</code>时，随机复制1个单位；为<code>-4</code>时，复制一个卡牌内数量最多的单位。</li><li>奖励效果(夺取卡牌)：参数<code>触发夺取效果</code>值为<code>真</code>时，响应发动条件<code>自身被夺取时</code>和<code>任意被夺取时</code>。</li><li>奖励效果(夺取单位)：参数<code>夺取的数量</code>值为<code>-1</code>时，夺取所有单位；值为<code>-3</code>时，随机夺取1个单位。</li><li>奖励效果(兑换单位)：将“作用卡牌”内所有<code>从单位类型</code>的单位兑换为<code>到单位类型</code>，参数<code>兑换比</code>值为<code>2.0</code>表示二换一。</li><li>奖励效果(单位)：为“作用卡牌”添加单位。</li></ul><div class="custom-container tip"><p class="custom-container-title">获得方式</p><p>获得方式不同会触发不同的效果</p><ul><li>注卵：可以触发动作<code>卡牌自身注卵特效检验</code>和<code>任意卡牌注卵特效检验</code>，从而具有发动时间<code>自身注卵时</code>和<code>任意注卵时</code>的子特效字符串会被触发。</li><li>折跃：与<code>注卵</code>相同，触发<code>卡牌自身折跃特效检验</code>和<code>任意卡牌折跃特效检验</code>。</li><li><s>招募：废弃</s></li><li>随机三选一折跃：另一种折跃，会从<code>单位类型A</code>、<code>单位类型B</code>、<code>单位类型C</code>中随机挑一个进行折跃，也会触发折跃相关的“特效检验”。</li><li>普通：单纯获得单位，不触发<code>特效检验</code>。</li><li><s>空投：废弃</s></li><li><s>附属建筑：废弃</s></li><li>孵化：与<code>注卵</code>相同，触发<code>卡牌自身孵化特效检验</code>和<code>任意卡牌孵化特效检验</code>。</li><li><s>补员：废弃</s></li></ul></div><ul><li>奖励效果(摧毁卡牌)：摧毁“作用卡牌”。<code>击杀效果</code>值为<code>真</code>时，“作用卡牌”展示的单位会被击杀而不是被移除。</li><li>奖励效果(变更卡牌)：将“作用卡牌”变更。除了卡牌的单位和升级，卡牌所有属性都变为指定卡牌模板的属性。</li><li>奖励效果(变更单位)：参数<code>从类型</code>值为<code>无游戏链接</code>时，将任意类型单位变为<code>到类型</code>。参数<code>变更的数量</code>值为<code>-1</code>时，变更所有该类型的单位；值为<code>-2</code>时，变更一半。参数<code>变更方式</code>值为<code>变异</code>时，会触发<code>任意卡牌变异特效检验</code>（角色进化腔的技能就是使用<code>奖励效果(变更单位)</code>，且<code>变更方式</code>值为<code>变异</code>，即使它被写作“进化”）。</li></ul><h4 id="自制奖励效果" tabindex="-1"><a class="header-anchor" href="#自制奖励效果" aria-hidden="true">#</a> 自制奖励效果</h4><p>虽然新的效果都可以通过<code>奖励效果(运行触发器)</code>解决，但是自制奖励效果是一种一劳永逸的方法。若你想做“奖励效果(获得暂存卡牌的单位)”，可以参考以下步骤：</p><div class="custom-container tip"><p class="custom-container-title">位置</p><p>玩家卡牌特效&gt;特效字符串&gt;奖励效果</p></div><ol><li>在文件夹”奖励效果“中新建函数<code>奖励效果(获得暂存卡牌的单位)</code>（返回类型为字符串）。添加5个参数：</li></ol><div class="custom-container tip"><p class="custom-container-title">参数说明</p><ol><li><code>暂存卡牌索引</code>：类型为整数，表示从哪张暂存牌获取单位。</li><li><code>单位类型</code>：类型为单位类型，获取的单位类型。</li><li><code>单位过滤</code>：为了过滤一些单位，比如只想要”生物单位“。</li><li><code>数量</code>：获得的数量。</li><li><code>三连后效果倍率</code>：三连后获得的数量为<code>数量</code>与<code>三连后效果倍率</code>的积。</li></ol></div><p>再创建一个局部变量<code>String</code>，<code>String</code>以<code>GainUnitsInSavedCards</code>（这是需要你自定义的）打头，然后用<code>.</code>将5个参数拼接到<code>String</code>中（形如<code>GainUnitsInSavedCards.a.b.c.d.e</code>）。最后函数返回<code>String</code>。<br><br> 我们计划<code>暂存卡牌索引</code>值为<code>-1</code>时，将从每张暂存卡牌获得单位，否则从特定某一张暂存卡牌获得单位。<code>单位类型</code>值为<code>无游戏链接</code>时，获取任意类型的单位，否则获得指定类型的单位。<code>数量</code>值为<code>-1</code>时，获取暂存卡牌的所有单位，否则获得固定数量的单位。<br> 如果我们在实际使用中，想让”作用卡牌“获得每张暂存卡牌的1个生物单位（三连后获得2）。返回的<code>String</code>应该为<code>GainUnitsInSavedCards.-1..Bio.1.[2.0]</code>。其中<code>三连后效果倍率</code>为<code>2.0</code>，为了防止其中的<code>.</code>被误认，实数需要放在<code>[]</code>中；<code>单位类型</code>为<code>无游戏链接</code>，所以在<code>String</code>中是空的。<br><br> 最终代码如图：</p><p><img src="/SCTavern-Editor-Manual/assets/p27.717c716d.png" alt="p27"></p><p>2.在文件夹”奖励效果“中新建动作<code>应用奖励效果(获得暂存卡牌的单位)</code>。添加4个参数：</p><div class="custom-container tip"><p class="custom-container-title">参数说明</p><ol><li><code>玩家</code>：类型为整数，触发的玩家。</li><li><code>卡牌索引</code>：类型为整数，触发<code>子特效字符串</code>的卡牌的索引。</li><li><code>每一个效果的字符串</code>：也就是函数<code>奖励效果(获得暂存卡牌的单位)</code>返回的字符串（如<code>GainUnitsInSavedCards.-1..Bio.1.[2.0]</code>）。</li><li><code>子特效字符串</code>：奖励效果所处于的<code>子特效字符串</code>。我们主要是为了获得其中的<code>作用位置</code>，从而获得”作用卡牌“。</li><li><code>已三连</code>：值为<code>真</code>触发三连效果。</li></ol></div><p>第一步是将<code>每一个效果的字符串</code>拆开。你可以使用函数<code>子特效字符串的关键词第n个内部</code>来获得各个部分的字符串。如<code>GainUnitsInSavedCards.-1..Bio.1.[2.0]</code>中第4个内部为<code>Bio</code>，第6个内部为<code>[2.0]</code>，对于有<code>[]</code>的字符串，你还需要使用函数<code>去掉包裹的括号</code>。</p><p><img src="/SCTavern-Editor-Manual/assets/p28.e8761185.png" alt="p28"></p><p>如上图，我们创建了5个局部变量并赋了值。你需要使用形如<code>将字符串转换为XXX</code>的函数来将字符串转换为整数或者其他类型。下面我们来具体实现获得暂存卡牌的单位。</p><ol start="3"><li>找到暂存卡牌。在这之前，确保你理解<a href="/SCTavern-Editor-Manual/card/README.md/#%E5%95%86%E5%BA%97%E5%8D%A1%E7%89%8C%E5%92%8C%E6%9A%82%E5%AD%98%E5%8C%BA%E5%8D%A1%E7%89%8C" class="">商店卡牌和暂存区卡牌</a></li></ol><p><img src="/SCTavern-Editor-Manual/assets/p29.b29a392a.png" alt="p29"></p><p>通过以上代码我们将有效的暂存卡牌索引存在<code>有效暂存卡牌索引</code>中。</p><ol start="4"><li>找到获取的数量。</li></ol><p><img src="/SCTavern-Editor-Manual/assets/p30.c4f95c1a.png" alt="p30"></p><ol start="5"><li>遍历”作用卡牌“。你需要用到函数<code>寻找对应的卡牌</code>。<code>作用位置</code>是一个字符串，如果其值为<code>137</code>，则表示1号位、3号位、7号位的卡牌。</li></ol><p><img src="/SCTavern-Editor-Manual/assets/p31.ea507045.png" alt="p31"></p><ol start="6"><li>为每张”作用卡牌“从暂存卡牌中添加单位。</li></ol><p><img src="/SCTavern-Editor-Manual/assets/p32.116b30b8.png" alt="p32"></p><ol start="7"><li>。。。</li><li>。。。</li></ol><h4 id="奖励效果触发器" tabindex="-1"><a class="header-anchor" href="#奖励效果触发器" aria-hidden="true">#</a> 奖励效果触发器</h4><p>函数<code>奖励效果(运行触发器)</code>，有4个参数。第一个参数<code>触发器</code>运行的就是“奖励效果触发器”。第二个参数<code>需要选择队友</code>值为<code>真</code>时，“奖励效果触发器”可以获取玩家的盟友，仅在玩家存在盟友时生效。</p><p>对于“奖励效果触发器”，你可以使用全局变量获得类似“触发的玩家”、“触发的卡牌”等数据。你可以在下图的文件夹中找到“奖励效果触发器”可以使用的变量。</p><p><img src="/SCTavern-Editor-Manual/assets/p33.bb5c2c19.png" alt="p33"></p><div class="custom-container tip"><p class="custom-container-title">位置</p><p>玩家卡牌特效&gt;奖励效果触发器&gt;可能用到的变量</p></div><p>我们可以看一下上图最下方的触发器<code>示例</code>：</p><p><img src="/SCTavern-Editor-Manual/assets/p34.0326e120.png" alt="p34"></p><p>你可以以此为模板制作自己的奖励效果触发器。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>尽量不直接使用奖励效果的全局变量，而是把它们存在局部变量中，再使用局部变量。因为触发器执行过程中，全局变量的值可能会发生更改。</p></div><h2 id="各种子特效字符串" tabindex="-1"><a class="header-anchor" href="#各种子特效字符串" aria-hidden="true">#</a> 各种子特效字符串</h2><p>大多数“子特效字符串”进行区分，只是为了便于自动生成描述。本质上跟“子特效字符串(一般)”没有区别。因此“子特效字符串”可以分为两类：</p><ol><li>一般子特效字符串</li></ol><ul><li>子特效字符串(一般)：万能。</li><li>子特效字符串(一般|不自动生成描述)：除了不会自动生成描述，其他跟子特效字符串(一般)一模一样。</li><li>子特效字符串(孵化)：不会触发“孵化”的检验。而是需要<code>奖励效果(单位)</code>的获得方式为<code>孵化</code>。</li><li>子特效字符串(注卵)：不会触发“注卵”的检验。而是需要<code>奖励效果(单位)</code>的获得方式为<code>注卵</code>。其中，”作用位置B“值为<code>虫卵</code>时，场上没有“虫卵”时，会自动创建“虫卵”。</li><li>子特效字符串(折跃)：不会触发“折跃”的检验。而是需要<code>奖励效果(单位)</code>的获得方式为<code>折跃</code>。</li><li>子特效字符串(集结)：能触发特效检验：<code>卡牌自身集结特效检验</code>和<code>任意卡牌集结特效检验</code>。</li><li>子特效字符串(变异)：不会触发“变异”的检验。而是需要<code>奖励效果(变更)</code>的变更方式为<code>变异</code>。</li><li>子特效字符串(制造)：虽然只有两个参数，但是只是默认把<code>发动时间</code>设为了<code>每回合结束时</code>，<code>作用位置</code>设为了<code>自身</code>。</li><li>子特效字符串(快速生产)：只是把<code>发动时间</code>默认设为了<code>自身快速生产时</code>。</li><li>子特效字符串(快速光环特效)：只是在前面加了“子特效字符串(光环)”，并且<code>发动条件</code>默认包含<code>发动条件(是具有该光环的第一张卡牌)</code>。</li></ul><ol start="2"><li>特殊子特效字符串</li></ol><ul><li>子特效字符串(无特效)：毫无用处，返回空字符串。</li><li>子特效字符串(任务制定)：只起制定作用，具体怎么完成任务需要另行设置。参考<a href="/SCTavern-Editor-Manual/card/effectString.md/#%E4%BB%BB%E5%8A%A1" class="">任务</a>。</li><li>子特效字符串(辅助卡牌)：辅助卡牌只对指定卡牌起作用，所以“作用卡牌”就是辅助卡牌指定的那张卡牌。（“辅助卡牌”的实际作用是：选择一张卡牌，然后让那张卡牌执行“辅助卡牌”上的“特效字符串”，因此，实际上是被选择的卡牌自己执行“特效字符串”，“辅助卡牌”完全不会参与。）</li><li>子特效字符串(总是折跃到此卡牌)：早期设计的“子特效字符串”，虽然没有废弃。但现在完全可以用“光环”解决问题，因此如今有点多余。</li><li>子特效字符串(定点部署)：能让卡牌有定点部署功能。</li><li>子特效字符串(简易快速生产)：跟子特效字符串(快速生产)一样，只是将一些参数设为默认值。</li><li>子特效字符串(反应堆生产变更)：让卡牌的“反应堆”可以生产此单位。</li><li>子特效字符串(科技生产变更)：类似“子特效字符串(反应堆生产变更)”，但不确定如今是否起作用。</li><li>子特效字符串(佣兵信标)：不确定如今是否起作用。</li><li>子特效字符串(光环)：给卡牌标记一个光环，你可以随意设置光环字符串。你还可以结合<code>发动条件(是具有该光环的第一张卡牌)</code>，实现“唯一”的效果。具体请参考<a href="/SCTavern-Editor-Manual/card/effectString.md/#%E5%85%89%E7%8E%AF" class="">光环</a>。</li><li>子特效字符串(黑暗容器)：让卡牌可以获得“黑暗值”。</li><li>子特效字符串(黑暗印记)：让卡牌“黑暗值”达到<code>兑换比</code>时，可以复活。</li><li>子特效字符串(提供能量)：充当“水晶塔”的效果，参数<code>光环</code>为<code>null</code>时，多张卡牌都起效，否则多张相同<code>光环</code>卡牌只有一张起效。</li></ul><ol start="3"><li>废弃的</li></ol><ul><li><s>子特效字符串(空投)：废弃</s></li><li><s>子特效字符串(采集)：废弃</s></li><li><s>子特效字符串(科研)：废弃</s></li><li><s>子特效字符串(空投交换)：废弃</s></li><li><s>子特效字符串(接口)：废弃</s></li><li><s>子特效字符串(空降)：废弃</s></li></ul><h2 id="任务" tabindex="-1"><a class="header-anchor" href="#任务" aria-hidden="true">#</a> 任务</h2><h2 id="光环" tabindex="-1"><a class="header-anchor" href="#光环" aria-hidden="true">#</a> 光环</h2><h2 id="直接执行" tabindex="-1"><a class="header-anchor" href="#直接执行" aria-hidden="true">#</a> 直接执行</h2><p>我们知道“子特效字符串”本质上就是一个字符串，即使一张卡牌不具备某个“子特效字符串”，我们可以调用动作<code>直接执行子特效字符串</code>，来<strong>无视发动时间</strong>直接执行这个“子特效字符串”。</p><div class="custom-container tip"><p class="custom-container-title">强制执行次数</p><p>用来设置子特效字符串重复执行的次数。若值为-1则按照默认次数执行。通常子特效字符串默认只执行一次，但例如“子特效字符串(集结)”会根据能量强度确定执行次数。可以参考卡牌「战斗号角」。</p></div><h2 id="字符串" tabindex="-1"><a class="header-anchor" href="#字符串" aria-hidden="true">#</a> 字符串？</h2><p>这是卡牌「」<code>Normal_</code>的特效字符串。</p><h2 id="自动生成描述" tabindex="-1"><a class="header-anchor" href="#自动生成描述" aria-hidden="true">#</a> 自动生成描述</h2></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/SCTavern-Editor-Manual/card/" class="router-link-active" aria-label="卡牌"><!--[--><!--]--> 卡牌 <!--[--><!--]--></a></span><span class="next"><a href="/SCTavern-Editor-Manual/unit/" class="" aria-label="单位"><!--[--><!--]--> 单位 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/SCTavern-Editor-Manual/assets/app.c004be2d.js" defer></script>
  </body>
</html>
